<div class="row">
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
		<div class="jumbotron">
			<div class="jumbotron-wrapper">
				<div class="jumbotron-content">
					<h1>
						${form.description!}
					</h1>
				</div>
			</div>
		</div>
	</div>
</div>
<div class="row calendar-row">
	<div class="layout-wrapper">	
		<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
			<form class="form-horizontal" role="form" id="form-validate" action="jsp/site/Portal.jsp" method="post" enctype="multipart/form-data">
				<input name="page" value="appointment" type="hidden">
				<input name="action" value="doValidateForm" type="hidden">
				<input name="id_form" value="${form.idForm}" type="hidden">
				<input type="hidden" name="date_of_display" value="${date_of_display}">
				<input name="session" value="session" type="hidden">				
				<fieldset>
					<legend>
						<#if form.displayTitleFo && form.title != "" >
							${form.title}
						<#else>
							#i18n{appointment.appointmentApp.defaultTitle}
						</#if>
					</legend>
					<br>				
					<#if form_errors??>
						<#assign hasDisplayableError = false>
						<#list form_errors as form_error>
							<#if form_error.isDisplayableError>
								<#assign hasDisplayableError = true>
								<#break >
							</#if>
						</#list>
						<#if hasDisplayableError>
							<#list form_errors as form_error>	
								<#if form_error.isDisplayableError && form_error.errorMessage==listAllErrors[8] >
									<div class="alert alert-error alert-danger">
										<p>
										  	${form_error.errorMessage}
										</p>
									</div>
								</#if>	
							</#list>						
						</#if>
					</#if>				
					<#assign formGroupError = '' />
					<#if form_errors??>
						<#assign hasDisplayableError = false>
						<#list form_errors as form_error>
							<#if form_error.isDisplayableError>
								<#assign hasDisplayableError = true>
								<#break >
							</#if>
						</#list>
						<#if hasDisplayableError>
							<#list form_errors as form_error>	
								<#if form_error.isDisplayableError && form_error.errorMessage==listAllErrors[0]>
									<#assign formGroupError = '<span class="help-block">${form_error.errorMessage}</span>' />
								</#if>	
							</#list>
						</#if>
					</#if>
					<div class="form-group <#if formGroupError!=''>has-error</#if>">
						<label class="col-xs-12 col-sm-12 col-md-12 col-lg-12" for="lastname">${formMessages.fieldLastNameTitle!} *</label>
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<input type="text" class="form-control" value="<#if appointment??>${appointment.lastName!}</#if>" maxlength="255" id="lastname" name="lastname">
							<#if formGroupError!=''>
								${formGroupError}
							<#else>
								<#if formMessages.fieldLastNameHelp?? && formMessages.fieldLastNameHelp != ''>
									<span class="help-block">${formMessages.fieldLastNameHelp}</span>
								</#if>
							</#if>
						</div>
					</div>								
					<#assign formGroupError = '' />
					<#if form_errors??>
						<#assign hasDisplayableError = false>
						<#list form_errors as form_error>
							<#if form_error.isDisplayableError>
								<#assign hasDisplayableError = true>
								<#break >
							</#if>
						</#list>
						<#if hasDisplayableError>
							<#list form_errors as form_error>	
								<#if form_error.isDisplayableError && form_error.errorMessage==listAllErrors[1]>
									<#assign formGroupError = '<span class="help-block">${form_error.errorMessage}</span>' />
								</#if>	
							</#list>
						</#if>
					</#if>
					<div class="form-group <#if formGroupError!=''>has-error</#if>">
						<label class="col-xs-12 col-sm-12 col-md-12 col-lg-12" for="firstname">${formMessages.fieldFirstNameTitle!} *</label>
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<input type="text" class="form-control" value="<#if appointment??>${appointment.firstName!}</#if>" maxlength="255" id="firstname" name="firstname">
							<#if formGroupError!=''>
								${formGroupError}
							<#else>
								<#if formMessages.fieldFirstNameHelp?? && formMessages.fieldFirstNameHelp != ''>
									<span class="help-block">${formMessages.fieldLastNameHelp}</span>
								</#if>
							</#if>
						</div>
					</div>			
					<#assign formGroupError = '' />
					<#if form_errors??>
						<#assign hasDisplayableError = false>
						<#list form_errors as form_error>
							<#if form_error.isDisplayableError>
								<#assign hasDisplayableError = true>
								<#break >
							</#if>
						</#list>
						<#if hasDisplayableError>
							<#list form_errors as form_error>	
								<#if  form_error.isDisplayableError && (form_error.errorMessage==listAllErrors[2] || form_error.errorMessage==listAllErrors[3])>
									<#assign formGroupError = '<span class="help-block">${form_error.errorMessage}</span>' />
								</#if>	
							</#list>
						</#if>
					</#if>
					<div class="form-group <#if formGroupError!=''>has-error</#if>">
						<label class="col-xs-12 col-sm-12 col-md-12 col-lg-12" for="email">${formMessages.fieldEmailTitle!} <#if form.enableMandatoryEmail>*</#if></label>
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<input type="text" class="form-control" value="<#if appointment??>${appointment.email!}</#if>" maxlength="255" id="email" name="email">
							<#if formGroupError!=''>
								${formGroupError}
							<#else>
								<#if formMessages.fieldEmailHelp?? && formMessages.fieldEmailHelp != ''>
									<span class="help-block">${formMessages.fieldEmailHelp}</span>
								</#if>
							</#if>
						</div>
					</div>											
					<#assign formGroupError = '' />
					<#if form_errors??>
						<#assign hasDisplayableError = false>
						<#list form_errors as form_error>
							<#if form_error.isDisplayableError>
								<#assign hasDisplayableError = true>
								<#break >
							</#if>
						</#list>
						<#if hasDisplayableError>
							<#list form_errors as form_error>	
								<#if form_error.isDisplayableError && (form_error.errorMessage == listAllErrors[4] || form_error.errorMessage == listAllErrors[5] )>
									<#assign formGroupError = '<span class="help-block">${form_error.errorMessage}</span>' />
								</#if>	
							</#list>
						</#if>
					</#if>
					<div class="form-group <#if formGroupError!=''>has-error</#if>">
						<label class="col-xs-12 col-sm-12 col-md-12 col-lg-12"for="emailConfirm">${formMessages.fieldConfirmationEmail!}<#if form.enableMandatoryEmail>*</#if></label>
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<input type="text" value="" maxlength="255" id="emailConfirm" name="emailConfirm" class="form-control">
							<#if formGroupError!=''>
								${formGroupError}
							<#else>
								<#if formMessages.fieldConfirmationEmail?? && formMessages.fieldConfirmationEmailHelp != ''>
									<span class="help-block">${formMessages.fieldConfirmationEmailHelp!}</span>
								</#if>
							</#if>
						</div>
					</div>							
					<#if form.maxPeoplePerAppointment &gt; 1>
						<#assign formGroupError = '' />
						<#if form_errors??>
							<#assign hasDisplayableError = false>
							<#list form_errors as form_error>
								<#if form_error.isDisplayableError>
									<#assign hasDisplayableError = true>
									<#break >
								</#if>
							</#list>
							<#if hasDisplayableError>
								<#list form_errors as form_error>	
									<#if form_error.isDisplayableError && (form_error.errorMessage==listAllErrors[6] || form_error.errorMessage == listAllErrors[7]) >
										<#assign formGroupError = '<span class="help-block">${form_error.errorMessage}</span>' />
									</#if>	
								</#list>
							</#if>
						</#if>
						<div class="form-group <#if formGroupError!=''>has-error</#if>">
							<label class="col-xs-12 col-sm-12 col-md-12 col-lg-12"for="numberPlacesReserved">#i18n{appointment.create_appointmentform.labelMaxPeoplePerAppointment}*</label>
							<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
								<input type="text"  maxlength="3" id="numberPlacesReserved" name="numberPlacesReserved" class="form-control" onchange="this.value = minmax(this.value, 1, ${nbplaces})" onkeypress='return event.charCode >= 48 && event.charCode <= 57'>
								<#if formGroupError!=''>
									${formGroupError}
								<#else>
									<#if nbplaces != 0 >
										<span class="help-block">${nbplaces!} places maximum</span>
									</#if>
								</#if>
							</div>
						</div>
					</#if>								
					${str_entry}				
					<div class="form-group">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<button class="btn btn-primary btn-sm" type="submit" name="save" >
								<i class="glyphicon glyphicon-ok"></i><span class="hidden-xs">&nbsp;#i18n{appointment.display_appointment_form.labelValidate}</span>
							</button>
							<button type="reset" name="reset" class="btn btn-primary btn-sm">
								<i class="glyphicon glyphicon-refresh"></i><span class="hidden-xs">&nbsp;#i18n{appointment.display_appointment_form.labelReset}</span>
							</button>
							<a class="btn btn-primary btn-sm" href="jsp/site/Portal.jsp?page=appointment&view=getViewAppointmentCalendar&id_form=${form.idForm}&date_of_display=${date_of_display}">
								<i class="glyphicon glyphicon-remove-circle"></i>&nbsp;#i18n{portal.util.labelBack}
							</a>														
						</div>
					</div>
				</fieldset>
			</form>
		</div>
	</div>
</div>
<script type="text/javascript">
function minmax(value, min, max) 
{
    if(parseInt(value) < min || isNaN(parseInt(value))) 
        return 1; 
    else if(parseInt(value) > max) 
        return ${nbplaces}; 
    else return value;
}
</script>
