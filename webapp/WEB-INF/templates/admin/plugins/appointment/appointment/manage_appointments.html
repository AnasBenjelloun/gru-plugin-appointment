<#include "/admin/plugins/appointment/appointment/manage_appointment_tabs.html" />
<div class="row-fluid" >
	<div class="span12">
		<fieldset>
			<legend>
				${form.title} - #i18n{appointment.manage_appointments.pageTitle}
				<#if day??>#i18n{appointment.manage_appointment_calendar.labelOf} ${day.date}</#if>
				<#if slot??>
					#i18n{appointment.manage_appointment_calendar.labelFrom} <#if slot.startingHour &lt; 10>0</#if>${slot.startingHour}h<#if slot.startingMinute &lt; 10>0</#if>${slot.startingMinute}
					#i18n{appointment.manage_appointment_calendar.labelTo} <#if slot.endingHour &lt; 10>0</#if>${slot.endingHour}h<#if slot.endingMinute &lt; 10>0</#if>${slot.endingMinute}
				</#if>
				<#if rightCreate?? && rightCreate>
					<a href="jsp/admin/plugins/appointment/ManageAppointments.jsp?view=createAppointment&id_form=${form.idForm}" class="btn btn-primary pull-right" type="submit">
						<i class="icon-plus icon-white">&nbsp;</i>&nbsp;#i18n{appointment.manage_appointments.buttonAdd}
					</a>
				</#if>
			</legend>   
			<@tabs tab="filter" form=form />
			<@messages infos=infos />
			<form action="jsp/admin/plugins/appointment/ManageAppointments.jsp">
				<input type="hidden" name="view" value="manageAppointments">
				<#if slot??>
					<input type="hidden" name="idSlot" value="${slot.idSlot}">
				</#if>
				<#if day??>
					<input type="hidden" name="id_day" value="${day.idDay}">
				</#if>
				<#if form??>
					<input type="hidden" name="id_form" value="${form.idForm}">
				</#if>
				<div class="row-fluid">
					<div class="span4 well">
						<fieldset>
							<legend>#i18n{appointment.manage_appointments.labelSearch}</legend>
							<div class="control-group">
								<label class="control-label">${formMessages.fieldFirstNameTitle}</label>
								<input type="text" name="firstName" value="${filter.firstName!}">
							</div>
							<div class="control-group">
								<label class="control-label">${formMessages.fieldLastNameTitle}</label>
								<input type="text" name="lastName" value="${filter.lastName!}">
							</div>
							<div class="control-group">
								<label class="control-label">${formMessages.fieldEmailTitle}</label>
								<input type="text" name="email" value="${filter.email!}">
							</div>
							<div class="control-group">
								<label class="control-label">#i18n{appointment.manage_appointments.labelDate}</label>
								<input type="text" id="dateAppointment" name="dateAppointment" value="${filter.dateAppointment!}">
								<span class="help-block">#i18n{appointment.manage_appointments.labelDateHelp}</span>
							</div>
							<div class="control-group">
								<label class="control-label">#i18n{appointment.manage_appointments.labelStatus}</label>
								<@combo name="status" items=refListStatus default_value=filter.status />
							</div>
							<div class="form-actions">
								<button class="btn btn-primary btn-small" title="#i18n{appointment.manage_appointments.labelSearch}">
									<i class="fa fa-search">&nbsp;</i>#i18n{appointment.manage_appointments.labelSearch}
								</button>
								<a class="btn btn-small" href="jsp/admin/plugins/appointment/ManageAppointments.jsp?view=manageAppointments<#if form??>&id_form=${form.idForm}</#if>" title="#i18n{appointment.display_appointment_form.labelReset}">
									<i class="fa fa-refresh">&nbsp;</i>#i18n{appointment.display_appointment_form.labelReset}
								</a>
							</div>
						</fieldset>
					</div>
					<div class="span8">
						<@paginationAdmin paginator=paginator combo=1 form=0 />
						<#if appointment_list?? && appointment_list?size &gt; 0>
							<table class="table table-condensed table-striped">
								<tr>
									<th>#i18n{appointment.manage_appointments.columnFirstName}</th>
									<th>#i18n{appointment.manage_appointments.columnLastName}</th>
									<th>#i18n{appointment.manage_appointments.columnEmail}</th>
									<th>#i18n{appointment.manage_appointments.columnDateAppointment}</th>
									<th>#i18n{appointment.manage_appointments.columnStatus}</th>
									<th>#i18n{portal.util.labelActions}</th>
								</tr>
								<#list appointment_list as appointment >
									<tr>
										<td>
											${appointment.firstName}
										</td>
										<td>
											${appointment.lastName}
										</td>
										<td>
											${appointment.email}
										</td>
										<td>
											${appointment.dateAppointment}
										</td>
										<td>
											<#if appointment.status == status_validated>
												<span class="label label-success">
													#i18n{appointment.message.labelStatusValidated}
												</span>
											<#elseif appointment.status = status_rejected>
												<span class="label label-important">
													#i18n{appointment.message.labelStatusRejected}
												</span>
											<#else>
												<span class="label">
													#i18n{appointment.message.labelStatusNotValidated}
												</span>
											</#if>
										</td>
										<td>
											<#if rightModify?? && rightModify>
												<a href="jsp/admin/plugins/appointment/ManageAppointments.jsp?view=modifyAppointment&id_appointment=${appointment.idAppointment}" class="btn btn-primary btn-small" title="#i18n{portal.util.labelModify}">
													<i class="icon-edit icon-white">&nbsp;</i>
												</a>
											</#if>
											<#if rightView?? && rightView>
												<a href="jsp/admin/plugins/appointment/ManageAppointments.jsp?view=viewAppointment&id_appointment=${appointment.idAppointment}" class="btn btn-primary btn-small" title="#i18n{appointment.manage_appointments.labelViewAppointment}">
													<i class="icon-eye-open icon-white">&nbsp;</i>
												</a>
											</#if>
											<#if appointment.listWorkflowActions?? && appointment.listWorkflowActions?size &gt; 0>
												<#list appointment.listWorkflowActions as action>
													<a class="btn btn-small btn-primary" href="jsp/admin/plugins/appointment/ManageAppointments.jsp?view=viewWorkflowActionForm&id_action=${action.id}&amp;id_appointment=${appointment.idAppointment}">	
														<img src="image?resource_type=workflow_icon_img&id=${action.icon.id}" <#if action.icon.width!=-1> width="${action.icon.width}" </#if><#if action.icon.height!=-1> height="${action.icon.height}"</#if> title="${action.name}" alt="${action.name}"	/>
													</a>
												</#list>
											</#if>
											<#if appointment.status != status_validated>
												<a class="btn btn-small btn-success" href="jsp/admin/plugins/appointment/ManageAppointments.jsp?action=doChangeAppointmentStatus&id_appointment=${appointment.idAppointment}&new_status=${status_validated}" title="#i18n{appointment.manage_appointments.labelValidateAppointment}" >
													<i class="icon-ok icon-white">&nbsp;</i>
												</a>
											</#if>
											<#if appointment.status != status_rejected>
												<a class="btn btn-small btn-danger" href="jsp/admin/plugins/appointment/ManageAppointments.jsp?action=doChangeAppointmentStatus&id_appointment=${appointment.idAppointment}&new_status=${status_rejected}" title="#i18n{appointment.manage_appointments.labelRejectAppointment}" >
													<i class="icon-remove icon-white">&nbsp;</i>
												</a>
											</#if>
											<#if rightDelete?? && rightDelete>
												<a href="jsp/admin/plugins/appointment/ManageAppointments.jsp?action=confirmRemoveAppointment&id_appointment=${appointment.idAppointment}" class="btn btn-danger btn-small" title="#i18n{portal.util.labelDelete}" >
													<i class="icon-trash icon-white">&nbsp;</i>
												</a>
											</#if>
										</td>
									</tr>
								</#list>
							</table>
						<#else>
							#i18n{portal.util.labelNoItem}
						</#if>
						<@paginationAdmin paginator=paginator form=0 />
					</div>
				</div>
			</form>
		</fieldset>
	</div>
</div>
<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<@getDatePicker idField="dateAppointment" language='fr' />


