<#include "/admin/plugins/appointment/appointment/manage_appointment_tabs.html" />
<script src="js/plugins/appointment/jquery.min.js"></script>
<script src="js/plugins/appointment/moment.min.js" ></script>
<script src="js/plugins/appointment/fullcalendar.min.js"></script>
<script src="js/plugins/appointment/locale-all.js"></script>
<script src="js/plugins/appointment/bootstrap-datepicker.js" ></script>
<script src="js/locales/bootstrap-datepicker.fr.js" ></script>

<link rel="stylesheet" href="js/plugins/appointment/fullcalendar.min.css" />

<style>
.ui-widget-header {
    border: 1px solid #aaa;
    background: none;
    color: #222;
    font-weight: normal;
}


#toggle-add-comment{
    position: absolute;
    z-index: 999;
    top: 197px;
    left: 33px;
    background-color: rgb(233, 250, 0);
    border-color:rgb(233, 250, 0);
    color: rgb(0, 0, 0);
}

th.fc-day-header {
    height: auto !important;
   padding: 5px 20px !important;
}

.btn-comments{ 
    position:absolute; right:5px; top: 0 ;z-index:99; 
}

.fc-content{ 
    text-align:center;
}

.fc-content .fc-title i.fa-plus{
    position: absolute;
    right: 30px;
    top: 8px;
    z-index: 1;
    display: none;
    width: 15px
}

.fc-content:hover .fc-title  i.fa-plus{
    display: block;
} 

/* Begin From fullcalendar_ow_bo.css */
td.fc-axis.fc-time {
    width: 80px ;
    height: 40px ;
    padding: 8px 4px;
    text-align: center;
    line-height: 1.42857143;
    width: 130px;
    margin: 0;
    border-top: 0px solid transparent;   
    border-right: solid 1px rgb(190, 190, 190); 
}

.fc-day-grid-event.fc-h-event.fc-event.fc-start.fc-end{
    background-color: rgb(233, 250, 0);
    border-color:rgb(233, 250, 0);
    color: rgb(0, 0, 0);
}

th.fc-day-header {    
    height: 40px ;
    padding: 15px 20px;
    text-align: center;
    line-height: 1.42857143;
    margin: 0;
    border-top: 0px solid transparent;
	font-weight: normal;
	vertical-align: middle;
}

.fc-time-grid-event .fc-time, .fc-time-grid-event .fc-title {
	padding: 5px; 
}

.fc-title a{
    display: inline-block;
    padding-top: 5px;
    font-weight: 700;
    color: #000
}
.fc-title p{
    width: 80%;
    white-space: nowrap;
  	overflow: hidden;
  	text-overflow: ellipsis;
    margin: 0;
    text-align: left;
}

.fc-title p:not(:first-child){
   display: none;
}

/* End fullcalendar_ow_bo.css         */
/*** NEW                            ***/
.tab-content{ margin-bottom: 5rem ;}

/*** Overbooked                     ***/
.overbooked.bg-full{ 
    background: rgba(255, 165, 0, 1) !important; 
    
}
.overbooked{ 
    background: none !important;
}
.overbooked.bordered{ 
    border-right: 15px solid rgba(255, 165, 0, 1) !important 
}

.overbooked.bordered .fc-title a > i.fa-plus-circle::before{
    right: 17px;
}

.overbooked.dotted .fc-title::after{
    content: "\f111";
    font-family: "FontAwesome";
    color: rgba(255, 165, 0, 1);
    position: absolute;
    right: 15px;
    top: 5px;
    display: inline-block;
    
}

/*** FILLED         ***/

.filled{ 
    background: none !important;
}


.filled.bg-full{ 
 background:  rgba(255,0,0,1) !important;
}

.filled.bordered{ 
    border-right: 15px solid  rgba(255,0,0,1)  !important;
}

.filled.bordered .fc-title a > i.fa-plus-circle::before{
    right: 17px;
} 

.filled.dotted .fc-title::after{
    content: '\f111';
    font-family: 'FontAwesome';
    color:  rgba(255,0,0,1);
    position: absolute;
    right: 15px;
    top: 5px;
    display: inline-block;
}
</style>
<@row>
    <@columns>
        <!-- <h2>${form.title} - #i18n{appointment.manageAppointmentCalendar.pageTitle}</h2> -->
        <@appointmentTabs tab="calendar" form=form >
        <@messages errors=errors infos=infos />
        <#if formCalendarErrors??>
            <div class="layout-wrapper"></div>
        <#else>
            <div id="btn-comment-main">
                <button type="button" data-toggle="modal" data-target="#commentModal" title="#i18n{appointment.create_comment.pageTitle}" id="toggle-add-comment" class="btn btn-link">
                    <i class="fa fa-commenting-o"></i> 
                </button>
            </div>
            <div id="calendar"></div>
        </#if>
        </@appointmentTabs>
    </@columns>
</@row>

<div class="modal fade"  id="commentModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">#i18n{appointment.create_comment.pageTitle}</h4>
            </div>
            <div class="modal-body">
                <@getCommentForm "comment" "startingValidityDate" "endingValidityDate" "doAddComment" id_form />
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">#i18n{portal.util.labelCancel}</button></div>

        </div>
    </div>
</div>

<div class="modal fade"  id="modify-comment" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">#i18n{appointment.create_comment.pageTitle}</h4>
            </div>
            <div class="modal-body">
                <@getCommentForm "comment" "modifyStartingValidityDate" "modifyEndingValidityDate" "doModifyComment" id_form />
            </div>
            <div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">#i18n{portal.util.labelCancel}</button></div>
        </div>
    </div>
</div>


<script>
    /* ********************************************************* */
    /*
        TODO : Add style def to model
        Possible values: dotted, bordered , bg-full,  bg-grad    
    */
    <#assign typeClass='dotted'>
    <#assign titleSlot=true >
    var bgOpenColor = '#fff;'
    var bgClosedColor = '#bebebe;'

    /* ********************************************************* */

    var slotDuration = '${min_duration}';
    var minTime = '${min_time}';
    var maxTime = '${max_time}';
    var dow = [<#if dow??><#list dow as day>'${day}',</#list></#if>];
    var startingDateOfDisplay = '${starting_date_of_display}';
    var endingDateOfDisplay = '${ending_date_of_display}';
    var strStartingDateOfDisplay = '${str_starting_date_of_display}';
    var strEndingDateOfDisplay = '${str_ending_date_of_display}';
    var idForm = '${id_form}';
    var columnFormat = 'dddd DD/MM/YYYY';
    var eventUrl = 'jsp/admin/plugins/appointment/ManageAppointments.jsp?view=';
    var events = [
        <#if comment_events??>
            <#list comment_events as comment_event>
            {
                "title" : "${comment_event.comment?replace('\n', '')?replace('\r', '')?replace('\rn', '')?replace('\'', '&apos;')?replace('\"', '&quote;')}",
                "start" : "${comment_event.startingValidityDate}",
                "end" : "${comment_event.endingValidityDate}",
                "id" : "${comment_event.id}",
                "creator_user" : "${comment_event.creatorUserName!''}",
                "creation_date" : "${comment_event.creationDate!''}",
                "type": "comment"
            },
            </#list>
        </#if>
        <#if events??>
            <#list events as event>
                <#assign nbAppointments = event.nbPlacesTaken>
                <#assign maxCap = event.maxCapacity?number>
				<#if maxCap = 0><#assign maxCap = 1></#if>
                <#assign nbFull = nbAppointments / maxCap * 100 >
                <#assign eventTitle='${nbAppointments} / ${maxCap}'>
                <#if modifDateAppointment>
                    <#assign eventCreate=''>
                <#elseif event.isOpen & !event.isPassed & overbookingAllowed && (event.nbRemainingPlaces = event.nbPotentialRemainingPlaces)>
                    <#assign eventCreate='createAppointment&id_form=${event.idForm}&id_slot=${event.idSlot}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}&is_open=${event.isOpen?c}&is_specific=${event.isSpecific?c}&max_capacity=${maxCap}'>
                <#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbRemainingPlaces = event.nbPotentialRemainingPlaces)>
                    <#assign eventCreate='createAppointment&id_form=${event.idForm}&id_slot=${event.idSlot}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}&is_open=${event.isOpen?c}&is_specific=${event.isSpecific?c}&max_capacity=${maxCap}'>                            
                <#elseif event.isOpen & (event.nbRemainingPlaces = 0)>
                    <#assign eventCreate=''>                            
                <#elseif event.isOpen & (event.nbRemainingPlaces > 0) & (event.nbPotentialRemainingPlaces = 0)>
                    <#assign eventCreate=''>
                <#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbPotentialRemainingPlaces > 0) & (event.nbRemainingPlaces > event.nbPotentialRemainingPlaces)>
                     <#assign eventCreate='createAppointment&id_form=${event.idForm}&id_slot=${event.idSlot}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}&is_open=${event.isOpen?c}&is_specific=${event.isSpecific?c}&max_capacity=${maxCap}'>                            
                <#elseif event.isOpen>
                   <#assign eventCreate=''>
                <#elseif !event.isOpen & ((maxCap - event.nbRemainingPlaces) > 0)>
                    <#assign eventCreate=''>
                <#else>
                    <#assign eventCreate=''>
                </#if>
                <#assign strEventClass><#if event.isOpen & !event.isPassed & (nbAppointments > event.maxCapacity)>overbooked ${typeClass}<#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbPotentialRemainingPlaces = 0)>filled ${typeClass}<#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces = 0)>filled ${typeClass}</#if></#assign>
                <#assign strCustomColor><#if event.isOpen & !event.isPassed & (nbAppointments > event.maxCapacity)>rgba(255,165,0,1)<#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbPotentialRemainingPlaces = 0)>rgba(255,0,0,1)<#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces = 0)>rgba(255,0,0,1)<#else>rgba(222,222,222,1)</#if></#assign>
                {
                    "title" :   <#if modifDateAppointment>"<a href=" + eventUrl + "viewChangeDateAppointment&id_form=${event.idForm}&id_slot=${event.idSlot}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}&is_open=${event.isOpen?c}&is_specific=${event.isSpecific?c}&max_capacity=${event.maxCapacity}>${nbAppointments} / ${event.maxCapacity}<a/>"
                                <#elseif event.isOpen & !event.isPassed & overbookingAllowed && (event.nbRemainingPlaces = event.nbPotentialRemainingPlaces)>
                                "<a href=" + eventUrl + "manageAppointments&id_form=${event.idForm}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}>${nbAppointments} / ${event.maxCapacity}<a/>"
                                 + "&nbsp;"
                                 + "<a href=" + eventUrl + "createAppointment&id_form=${event.idForm}&id_slot=${event.idSlot}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}&is_open=${event.isOpen?c}&is_specific=${event.isSpecific?c}&max_capacity=${event.maxCapacity}"+"><i class=\"fa fa-plus\"></i></a>"
                                <#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbRemainingPlaces = event.nbPotentialRemainingPlaces)>
                                 "<a href=" + eventUrl + "manageAppointments&id_form=${event.idForm}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}>${nbAppointments} / ${event.maxCapacity}<a/>"
                                 + "&nbsp;"
                                 + "<a href=" + eventUrl + "createAppointment&id_form=${event.idForm}&id_slot=${event.idSlot}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}&is_open=${event.isOpen?c}&is_specific=${event.isSpecific?c}&max_capacity=${event.maxCapacity}"+"><i class=\"fa fa-plus\"></i></a>"
                                <#elseif event.isOpen & (event.nbRemainingPlaces = 0)>
                                 "<a href=" + eventUrl + "manageAppointments&id_form=${event.idForm}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}>${nbAppointments} / ${event.maxCapacity}<a/>"
                                <#elseif event.isOpen & (event.nbRemainingPlaces > 0) & (event.nbPotentialRemainingPlaces = 0)>'#i18n{appointment.manageCalendarSlots.labelEditFull}'
                                <#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbPotentialRemainingPlaces > 0) & (event.nbRemainingPlaces > event.nbPotentialRemainingPlaces)>
                                 "<a href=" + eventUrl + "manageAppointments&id_form=${event.idForm}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}>${nbAppointments} / ${event.maxCapacity}<a/>"
                                 + "&nbsp;"
                                 + "#i18n{appointment.manageCalendarSlots.labelEdit}"
                                 + "&nbsp;"
                                 + "<a href=" + eventUrl + "createAppointment&id_form=${event.idForm}&id_slot=${event.idSlot}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}&is_open=${event.isOpen?c}&is_specific=${event.isSpecific?c}&max_capacity=${event.maxCapacity}"+"><i class=\"glyphicon icon-plus-sign\"></i></a>"
                                <#elseif event.isOpen>
                                 "<a href=" + eventUrl + "manageAppointments&id_form=${event.idForm}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}>${nbAppointments} / ${event.maxCapacity}<a/>"
                                <#elseif !event.isOpen & ((event.maxCapacity - event.nbRemainingPlaces) > 0)>'<a href=' + eventUrl + 'manageAppointments&id_form=${event.idForm}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}>${nbAppointments} / ${event.maxCapacity}<a/>'
                                <#else>"<a href=" + eventUrl + "manageAppointments&id_form=${event.idForm}&starting_date_time=${event.startingDateTime}&ending_date_time=${event.endingDateTime}><a/>"</#if>,
                    "start" :   '${event.startingDateTime}',
                    "end" :     '${event.endingDateTime}',
                    "id" :      '${event.idSlot}',
                    "textColor" :  <#if event.isOpen & !event.isPassed & (nbAppointments > maxCap)>'#000'<#else>'#2c2c2d'</#if>,
                    "createUrl" : '<#if eventCreate !='' && nbAppointments !=0>jsp/admin/plugins/appointment/ManageAppointments.jsp?view=${eventCreate}</#if>',
                    "customClass" : '${strEventClass!}',
                    "customStyle" : <#if event.isOpen & !event.isPassed>'linear-gradient( 90deg, ${strCustomColor} 0%, ${strCustomColor} ${nbFull?floor}%, rgba(255,255,255,1) ${nbFull?floor}% )',<#else>'',</#if>
                    "backgroundColor":<#if event.isOpen & !event.isPassed & (nbAppointments > maxCap)>bgOpenColor
                                    <#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbRemainingPlaces = event.nbPotentialRemainingPlaces)>bgOpenColor
                                    <#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces > 0) & (event.nbPotentialRemainingPlaces = 0)>bgOpenColor
                                    <#elseif event.isOpen & !event.isPassed & (event.nbRemainingPlaces = 0)>bgOpenColor
                                    <#elseif event.isOpen & event.isPassed>bgClosedColor<#else>bgClosedColor</#if>,
                    "borderColor" : bgClosedColor,
                    "type" : "appointment"
                },
            </#list>
        </#if>
    ];
    
    var defaultDate = '${date_of_display}';
    $( function() {
        $('#calendar').fullCalendar({
            displayEventTime: false,
            buttonText : {
                prev : '#i18n{appointment.appointmentApp.previousWeek}',
                next : '#i18n{appointment.appointmentApp.nextWeek}',
            },
            themeSystem: 'jquery-ui',
            navLinks: true,
            navLinkDayClick: function(date, jsEvent) {
                location.href = eventUrl + 'manageAppointments&id_form=' + idForm + '&starting_date_time=' + date.format() + 'T00:00&ending_date_time=' + date.format() + 'T23:59';
            },
            defaultDate: defaultDate,
            defaultView: 'agendaWeek',
            height: 'auto',
            locale: 'fr',
            nowIndicator: true,
            editable: false,
            customButtons: {
                datePicker: {
                    text: '#i18n{appointment.appointmentCalendar.labelChooseDate}',
                    click: function () {
                        var $btnCustom = $('.fc-datePicker-button'); // name of custom  button in the generated code
                        $btnCustom.after('<input type="text" id="hiddenDate" class="datepicker"/>');
                        $("#hiddenDate").datepicker({
                            showOn: "button",
                            language:'fr',
                            autoclose: true,
                            startDate: strStartingDateOfDisplay,
                            endDate: strEndingDateOfDisplay,
                            orientation: "bottom"
                        });
                        var $btnDatepicker = $(".ui-datepicker-trigger"); // name of the generated datepicker UI 
                        //Below are required for manipulating dynamically created datepicker on custom button click
                        $("#hiddenDate").focus().hide();
                        $btnDatepicker.trigger("click"); //dynamically generated button for datepicker when clicked on input textbox
                        $btnDatepicker.hide();
                        $btnDatepicker.remove();
                        $("input.datepicker").not(":first").remove();//dynamically appended every time on custom button click
                        $("#hiddenDate").change(function () {
                            $('#calendar').fullCalendar('gotoDate', moment($("#hiddenDate").val(),'DD-MM-YYYY'));
                        });
                    }
                }
            },
            header: {
                left: 'prev',
                center: 'today, datePicker, title',
                right: 'next'
            },
            columnHeaderHtml: function(mom) {
                return mom.format('dddd') + '</br>' + mom.format('LL');
            },
            slotLabelFormat: 'H:mm',
            slotLabelInterval: slotDuration,
            slotDuration: slotDuration,
            minTime: minTime,
            maxTime: maxTime,
            businessHours: {
                start: minTime,
                end: maxTime,
                dow: dow
            },
            events: events,
            viewRender: function(view, element) {
                var minDate = moment(startingDateOfDisplay);
                var maxDate = moment(endingDateOfDisplay);
                // Past
                if (minDate >= view.start && minDate <= view.end || view.end <= minDate) {
                    $(".fc-prev-button").prop('disabled', true);
                    $(".fc-prev-button").addClass('fc-state-disabled');
                } else {
                    $(".fc-prev-button").removeClass('fc-state-disabled');
                    $(".fc-prev-button").prop('disabled', false); 
                }
                // Future
                if (maxDate >= view.start && maxDate <= view.end || maxDate <= view.start) {
                    $(".fc-next-button").prop('disabled', true);
                    $(".fc-next-button").addClass('fc-state-disabled');
                } else {
                    $(".fc-next-button").removeClass('fc-state-disabled');
                    $(".fc-next-button").prop('disabled', false); 
                }
            },
            eventAfterAllRender: function(view) {
                $('.fc-event').css('cursor', 'pointer');
                $('.fc-next-button').attr('class', 'fc-next-button btn btn-primary btn-sm');
                $('.fc-prev-button').attr('class', 'fc-prev-button btn btn-primary btn-sm');
                $('.fc-today-button').attr('class', 'fc-today-button btn btn-primary btn-sm');
                $('.fc-datePicker-button').attr('class', 'fc-datePicker-button btn btn-primary btn-sm');
                
                $('.fc-view.fc-agendaWeek-view.fc-agenda-view .fc-body .ui-widget-content .fc-day-grid .fc-bg .fc-axis.ui-widget-content').html( '' );
                
                $('.toggle-modify-comment').click(function(ev) {
                    ev.preventDefault();
                    var formValues = JSON.parse( $(this).attr( "data-json" ) );
                    $("#modify-comment input[name='id_comment']").val( formValues.id_comment );
                    tinyMCE.activeEditor.setContent( formValues.comment_text );
                    $( "#modify-comment input[name='startingValidityDate']" ).datepicker().datepicker( 'setDate', new Date( parseInt( formValues.comment_start ) ) );
                    $( "#modify-comment input[name='endingValidityDate']" ).datepicker().datepicker( 'setDate', new Date( parseInt( formValues.comment_end ) ) );
                    $( "#modify-comment" ).modal('show');
                });
            },
            // windowResize: function(view) {
            //     if ($(window).width() < 1050){
            //         $('#calendar').fullCalendar( 'changeView', 'agendaDay' );    
            //         $('.spanNextButton').replaceWith("<span class='spanNextButton' style='margin-right: 5px;'>#i18n{appointment.appointmentApp.nextDay}</span>");
            //         $('.spanPrevButton').replaceWith("<span class='spanPrevButton' style='margin-right: 5px;'>#i18n{appointment.appointmentApp.previousDay}</span>");
            //     } else {
            //         $('#calendar').fullCalendar( 'changeView', 'agendaWeek' );                        
            //         $('.spanNextButton').replaceWith("<span class='spanNextButton' style='margin-right: 5px;'>#i18n{appointment.appointmentApp.nextWeek}</span>");
            //         $('.spanPrevButton').replaceWith("<span class='spanPrevButton' style='margin-right: 5px;'>#i18n{appointment.appointmentApp.previousWeek}</span>");
            //     }
            // },
            eventRender: function( event, element, view ) {
                var $title = element.find( '.fc-title' ), createSlot='';
                $(element).addClass( event.customClass );
                
                if ( event.customStyle !='' ){
                    $(element).css( 'background', event.customStyle );
                }
        
                $title.html( $title.text() );
                $(element).contextmenu(function() {
                    return false;
                });
                var json = {
                        "container": "body",
                        "placement" : "bottom",
                        "html" : true,
                        "trigger" : "hover"
                    };
                if( event.type == "comment" ){
                	json.content = '<p>Du ' + event.start.format('ddd DD/MM') + ' au ' + event.end.format('ddd DD/MM') +'<p><hr>'+ event.title + '<hr><p><strong>Par ' + event.creator_user + '</strong> le <time>' + event.creation_date + '</time>' ;
                } else {
                	json.content = event.start.format('ddd DD/MM')+"</center>" + "<center><b>" + event.start.format('HH:mm') + "</b> - <b>" + event.end.format('HH:mm')+"</b></center>";
                }
                $(element).popover( json );
                
                if(event.type == "comment" )
                {
                    var fcTitle = element.find('.fc-title p');
                    fcTitle.prepend( '[' + event.creator_user + ' | ' + event.creation_date + '] ');
                    element.append( "<div class='btn-comments'><a href='' class='toggle-modify-comment' data-json='{\"id_comment\": \"" + event.id + "\", \"comment_text\": \"" + event.title + "\", \"comment_start\":\"" + event.start + "\", \"comment_end\":\"" + event.end + "\" }' ><i class='fa fa-pencil fa-fw'></i></a><a href='jsp/admin/plugins/appointment/Comments.jsp?action=confirmRemoveComment&id_comment=" + event.id + "' class='closeon text-danger'><i class='fa fa-remove fa-fw'></i></a></div>" );
                }
            }
        });

    });
</script>

<#include "/admin/util/editor/editor.html" />
<@initEditor />
<@getDatePickerBootstrap idField="modifyStartingValidityDate" language=locale />
<@getDatePickerBootstrap idField="modifyEndingValidityDate" language=locale />
<@getDatePickerBootstrap idField="startingValidityDate" language=locale />
<@getDatePickerBootstrap idField="endingValidityDate" language=locale />
