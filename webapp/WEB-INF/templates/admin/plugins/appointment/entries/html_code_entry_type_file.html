<#include "/admin/plugins/appointment/commons.html" />
<div class="control-group">
	<label class="control-label" for="attribute${entry.idEntry}" id="form${entry.idEntry}">${entry.title}<#if entry.mandatory>	*</#if></label>
	<div class="controls">
		<#list entry.fields as field>
			<#if !field.title??>
				<input type="file" name="attribute${entry.idEntry}" id="attribute${entry.idEntry}" size="${field.width}"
				<#if list_responses??>
					<#list list_responses as response>
						<#if response.entry.idEntry == entry.idEntry && response.entry.error?? && response.entry.error.isDisplayableError>
							class="error"
						</#if>
					</#list>
					class="${entry.CSSClass!}"
				</#if>
				/>
			</#if>
		</#list>
		<button class="btn btn-primary btn-small" name="_appointment_upload_submit_attribute${entry.idEntry}" id="_appointment_upload_submit_attribute${entry.idEntry}" value="_appointment_upload_submit_attribute${entry.idEntry}" type="submit" >
			#i18n{appointment.action.send.name}
		</button>
		<input type="hidden" name="_appointment_upload_maxLength_attribute${entry.idEntry}" id="_appointment_upload_maxLength_attribute${entry.idEntry}" value="${getFileMaxSize( entry )}" />
		<#if entry.helpMessage?exists&&entry.helpMessage!=''>
			<span class="help-block">${entry.helpMessage}</span>
		</#if>
		<#if list_responses?? && list_responses?has_content>
			<#assign response_error = list_responses[0]>
			<#if response_error.entry.idEntry == entry.idEntry && response_error.entry.error?? && response_error.entry.error.isDisplayableError>
				<div class="alert alert-error">
					<#assign error = response_error.entry.error>
					<#if error.mandatoryError>
						#i18n{appointment.message.mandatory.entry}
					<#else>
						${error.errorMessage}
					</#if>
				</div>
			</#if>
		</#if>
	</div>
</div>

<#-- file removing -->
<#assign has_files = false>
<#if list_responses?? && list_responses?has_content>
	<#assign response_error = list_responses[0]>
	<#if response_error.entry.idEntry == entry.idEntry>
		<#assign has_files = true>
	</#if>
</#if>

<div class="control-group well" <#if !has_files>style="display:none;"</#if> id="_file_deletion_label_attribute${entry.idEntry}">
	<label class="control-label" for="delete_${entry.idEntry}">#i18n{appointment.file.uploadedFile}</label>
	<div id="_file_deletion_attribute${entry.idEntry}">
		<#assign file_index = 0>
		<#if has_files>
			<#list list_responses as response>
				<#if response.file?? && response.file.title?? && response.file.title != ''>
					<div class="controls">
						<label class="checkbox" for="_appointment_upload_checkbox_attribute${entry.idEntry}${file_index}">
						<input type="checkbox" name="_appointment_upload_checkbox_attribute${entry.idEntry}${file_index}" value="1" />${response.file.title}</label>
						<#assign file_index = file_index + 1>
					</div>
				</#if>
			</#list>
		</#if>
	</div>
	<br />
	<div class="controls">
		<button class="btn btn-primary btn-small" name="_appointment_upload_delete_attribute${entry.idEntry}" value="_appointment_upload_delete_attribute${entry.idEntry}" type="submit" >#i18n{appointment.action.delete.name}</button>
	</div>
</div>