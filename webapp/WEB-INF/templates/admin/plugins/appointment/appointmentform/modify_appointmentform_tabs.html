<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<link href="css/datepicker.css" rel="stylesheet">
<div class="row">
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
	<@messages infos=infos errors=errors />
		<div class="box box-primary">
			<div class="box-header with-border">
				<h3 class="box-title">#i18n{appointment.modify_appointmentform.title} : ${appointmentform.title}</h3>				
			</div>
		</div>
	</div>
</div>
<#macro tabs tab appointmentform >
<div class="nav-tabs-custom">
    <ul class="nav nav-tabs">    	
 		<li <#if tab="params">class="active"</#if>>
			<a href="jsp/admin/plugins/appointment/ManageAppointmentForms.jsp?view=modifyAppointmentForm&id_form=${appointmentform.idForm}">
				#i18n{appointment.modify_appointmentForm.titleAlterablesParameters}
			</a>
        </li>
		<li <#if tab="advancedParams">class="active"</#if>>
			<a href="jsp/admin/plugins/appointment/ManageAppointmentForms.jsp?view=modifyAppointmentFormAdvanced&id_form=${appointmentform.idForm}">
				#i18n{appointment.modify_appointmentForm.titleStructuralsParameters}
			</a>
        </li>
        <li <#if tab="entries">class="active"</#if>>
			<a href="jsp/admin/plugins/appointment/ManageAppointmentFormEntries.jsp?view=modifyAppointmentFormEntries&id_form=${appointmentform.idForm}">
				#i18n{appointment.modify_appointmentform_entries.pageTitle}
			</a>
        </li>        
        <li <#if tab="typicalWeek">class="active"</#if>>
			<a href="jsp/admin/plugins/appointment/ManageAppointmentSlots.jsp?view=manageTypicalWeek&id_form=${appointmentform.idForm}">
				#i18n{appointment.typicalWeek.pageTitle}
			</a>
        </li>
		<li <#if tab="specificWeek">class="active"</#if>>
			<a href="jsp/admin/plugins/appointment/ManageAppointmentSlots.jsp?view=manageSpecificWeek&id_form=${appointmentform.idForm}">
				#i18n{appointment.specificWeek.pageTitle}
			</a>
        </li>                          
    </ul>
</#macro>
<#macro modifyAppointmentFormLeftColumn appointmentform >
	<div class="tab-content">
		<fieldset>    			   
			<form method="post" class="form-horizontal" action="jsp/admin/plugins/appointment/ManageAppointmentForms.jsp" enctype="multipart/form-data" >	     
				<input type="hidden" id="id_form" name="id_form" value="${appointmentform.idForm}"/>				
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelTitle' inputName='title' mandatory=true value=appointmentform.title!'' i18nHelpBlockKey='appointment.create_appointmentform.labelTitle' maxlength=255 /> 
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelCategory' inputName='category' mandatory=false value=appointmentform.category!'' i18nHelpBlockKey='appointment.create_appointmentform.labelCategory' maxlength=255 /> 
				<@fieldTextArea i18nLabelKey='appointment.create_appointmentform.labelDescription' inputName='description' mandatory=true value=appointmentform.description!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDescription'/>								
				<div class="form-group">
					<label class="col-xs-12 col-sm-12 col-md-3 col-lg-3 control-label">#i18n{appointment.create_appointmentform.labelMinTimeBeforeAppointment} * :</label>
					<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
						<input type="text" name="min_time_before_appointment" value="${appointmentform.minTimeBeforeAppointment!''}" class="form-control" onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="2"/>	
						<p class="help-block">#i18n{appointment.create_appointmentform.labelMinTimeBeforeAppointment.help}</p>
					</div>
				</div>	
				<@fieldInputCalendar i18nLabelKey='appointment.create_appointmentform.labelDateStartValidity' inputName='date_start_validity' value=appointmentform.dateStartValidity!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDateStartValidity.help' cssClass='form-control input-sm' />
				<@fieldInputCalendar i18nLabelKey='appointment.create_appointmentform.labelDateEndValidity' inputName='date_end_validity' value=appointmentform.dateEndValidity!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDateEndValidity.help' cssClass='form-control input-sm' />						
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelDisplayTitleFo' inputName='display_title_fo' value='true' checked=appointmentform.displayTitleFo!false i18nHelpBlockKey='appointment.create_appointmentform.labelDisplayTitleFo.help' />				
				<div class="form-group">
					<label class="col-xs-12 col-sm-12 col-md-3 col-lg-3 control-label">#i18n{appointment.create_appointmentform.labelNbWeeksToDisplay} * :</label>
					<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
						<input type="text" name="nb_weeks_to_display" value="${appointmentform.nbWeeksToDisplay!''}" class="form-control" onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="3"/>	
						<p class="help-block">#i18n{appointment.create_appointmentform.labelNbWeeksToDisplay.help}</p>
					</div>
				</div>	
				<div class="form-group">
					<label class="col-xs-12 col-sm-12 col-md-3 col-lg-3 control-label">#i18n{appointment.create_appointmentform.labelNbDaysBeforeNewAppointment} * :</label>
					<div class="col-xs-12 col-sm-12 col-md-9 col-lg-9">
						<input type="text" name="nb_days_before_new_appointment" value="${appointmentform.nbDaysBeforeNewAppointment!''}" class="form-control" onkeypress='return event.charCode >= 48 && event.charCode <= 57' maxlength="2"/>	
						<p class="help-block">#i18n{appointment.create_appointmentform.labelNbDaysBeforeNewAppointment.help}</p>
					</div>
				</div>				
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelReference' inputName='reference' mandatory=false value=appointmentform.reference!'' maxlength=10 i18nHelpBlockKey='appointment.create_appointmentform.labelReference.help' />												
				<@fieldInputCombo i18nLabelKey='appointment.create_appointmentform.labelCalendarTemplate' inputName='calendarTemplateId' items=refListCalendarTemplates value="${appointmentform.calendarTemplateId!}" mandatory=true />
				<#if isCaptchaEnabled>
					<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableCaptcha' inputName='enableCaptcha' value='true' checked=appointmentform.enableCaptcha!false />
				</#if>				
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableMandatoryEmail' inputName='enableMandatoryEmail' value='true' checked=appointmentform.enableMandatoryEmail!false />
				<#if listWorkflows??>
					<@fieldInputCombo i18nLabelKey='appointment.create_appointmentform.labelWorkflow' inputName='idWorkflow' items=listWorkflows value="${appointmentform.idWorkflow!}" cssClass="form-control" />
				</#if>	
				<#assign icon= appointmentform.getIcon()>
				<#if icon.mimeType?? >
					<@fieldInputCheckBox i18nLabelKey='appointment.modify_appointmentForm.deleteIcon' inputName='deleteIcon' value='true'/>
				</#if>
				<div class="form-group">
					<label class="col-xs-12 col-sm-3 col-md-3 control-label" for="icon">#i18n{appointment.create_appointmentform.labelIconForm} &nbsp;:</label>
					<div class="col-xs-12 col-sm-3 col-md-3">
						<div class="input-group">	
							<input id="image_resource" type="file" name="image_resource" accept="image/*"/> 
						</div>
						<p class="help-block">#i18n{appointment.modify_appointmentForm.helpFormatIcon}</p>
					</div>
					<div class="col-xs-12 col-sm-6 col-md-6">
						<div class="input-group">
							<a class="btn btn-default" role="button" onclick ="$('#image_resource').val('')">
								<i class="glyphicon glyphicon-remove-circle"></i> Effacer
							</a>
						</div>
					</div>	
				</div>  				
				<div class="form-group ">
					<label class="col-xs-12 col-sm-3 col-md-3 col-lg-3 control-label" for="fileHolidays">#i18n{appointment.manageHolidays.labelImport} :</label>
					<div class="col-xs-12 col-sm-3 col-md-4 col-lg-3">
						<div class="input-group">
							<input id="fileSelect" type="file" name="fileClosingDays" accept=".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel" />
						</div>
						<p class="help-block"> #i18n{appointment.manageHolidays.labelClosinglabelFormatFile} </p>					
					</div>
					<div class="col-xs-12 col-sm-3 col-md-3">
						<div class="input-group">
							<a class="btn btn-default" onclick="$('#fileSelect').val('')">
								<i class="fa fa-times-circle-o" aria-hidden="true"></i> Effacer
							</a>
						</div>	
					</div>
				</div>			
				<div class="col-xs-12 col-sm-offset-3 col-sm-6 col-md-offset-3 col-md-6 col-lg-offset-3 col-lg-6">
					<div class="form-group">
						<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
							<button name="action_modifyAppointmentForm" class="btn btn-primary btn-sm" type="submit" tabindex="18">
								<i class="glyphicon glyphicon-ok">&nbsp;</i>&nbsp;#i18n{portal.util.labelModify}
							</button>
							<button name="view_manageAppointmentForms" class="btn btn-default btn-sm" type="submit">
								<i class="fa fa-times" aria-hidden="true"></i> #i18n{portal.util.labelCancel}
							</button>	
						</div>
					</div>
				</div>	        
			</form>
		</fieldset>
	</div>
</div>
<script src="js/jquery/plugins/ui/â€‹jquery-ui-1.9.2.custom.min.js"></script>
<@getDatePickerBootstrap idField="date_start_validity" language=language />
<@getDatePickerBootstrap idField="date_end_validity"   language=language />
<script type="text/javascript">
	$('#date_start_validity').datepicker({
    	language:		"${language}",
    	weekStart: 1,
    	todayBtn: true,
    	todayHighLight: true,
    	autoclose: true
	});
	$('#date_end_validity').datepicker({
	    language:		"${language}",
	    weekStart: 1,
	    todayBtn: true,
	    todayHighLight: true,
	    autoclose: true
	});
</script>
</#macro> 
