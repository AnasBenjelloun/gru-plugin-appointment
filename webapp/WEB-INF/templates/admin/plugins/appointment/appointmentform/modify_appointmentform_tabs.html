<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<link href="css/datepicker.css" rel="stylesheet">

<section class="content ">
	<div class="row">
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
	<fieldset>
	<legend>#i18n{appointment.create_appointmentform.pageTitle}
	    		<form class="form-inline pull-right spaced" method="post" action="jsp/admin/plugins/appointment/ManageAppointmentFormsAdvanced.jsp?view=modifyAppointmentFormAdvanced&id_form=${appointmentform.idForm}&forceReload=true">
    		<button type="submit" class="btn btn-primary btn-sm btn-flat" /><i class="glyphicon glyphicon-cog"></i><span class="hidden-phone">&nbsp;Param&#232;tres avanc&#233;s</span></button>
   		</form>
  		
	</legend>
</fieldset>
</div>
</div>
</section>

<#macro tabs tab appointmentform >
    <div>
        <ul class="nav nav-tabs">
    		<li <#if tab="params">class="active"</#if>>
				<a href="jsp/admin/plugins/appointment/ManageAppointmentForms.jsp?view=modifyAppointmentForm&id_form=${appointmentform.idForm}&forceReload=true">
					Paramètres généraux 
				</a>
            </li>
            <li <#if tab="entries">class="active"</#if>>
				<a href="jsp/admin/plugins/appointment/ManageAppointmentForms.jsp?view=modifyAppointmentForm&id_form=${appointmentform.idForm}&page=form_rdv">
					#i18n{appointment.modify_appointmentform.pageTitle}
				</a>
            </li>
            <li <#if tab="days">class="active"</#if>>
				<a href="jsp/admin/plugins/appointment/ManageAppointmentFormDays.jsp?view=modifyAppointmentFormDays&id_form=${appointmentform.idForm}&nb_week=0">
					#i18n{appointment.modify_appointmentformDays.pageTitle}
				</a>
            </li>
            <li <#if tab="slots">class="active"</#if>>
				<a href="jsp/admin/plugins/appointment/ManageAppointmentSlots.jsp?view=manageAppointmentSlots&id_form=${appointmentform.idForm}">
					#i18n{appointment.manageCalendarSlots.pageTitle}
				</a>
            </li>
            <#if isResourceInstalled?? && isResourceInstalled>
            	<li <#if tab="resources">class="active"</#if>>
					<a href="jsp/admin/plugins/appointment/modules/resource/ManageAppointmentFormResources.jsp?view=manageFormResources&id_form=${appointmentform.idForm}">
						#i18n{module.appointment.resource.manageAppointmentFormResources.pageTitle}
					</a>
	            </li>
            </#if>
        </ul>
    </div>
</#macro>
<#macro modifyAppointmentFormLeftColumn appointmentform >
	<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
	
	<div class="row">
	<fieldset>    
	<legend> #i18n{appointment.modify_appointmentForm.titleAlterablesParameters}</legend>
	    
	        <form method="post" action="jsp/admin/plugins/appointment/ManageAppointmentForms.jsp" enctype="multipart/form-data">
	      
	            <@messages errors=errors />
	            <input type="hidden" id="id_form" name="id_form" value="${appointmentform.idForm}"/>
	            <input type="hidden" id="formName" name="formName" value="second_form"/>
	            <@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelTitle' inputName='title' mandatory=true value=appointmentform.title!'' i18nHelpBlockKey='appointment.create_appointmentform.labelTitle' maxlength=255 /> 

				<@fieldTextArea i18nLabelKey='appointment.create_appointmentform.labelDescription' inputName='description' mandatory=true value=appointmentform.description!'' i18nHelpBlockKey='appointment.create_appointmentform.labelDescription'/>

				
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelMinDaysBeforeAppointments' inputName='min_days_before_appointment' value=appointmentform.minDaysBeforeAppointment!'0' i18nHelpBlockKey='appointment.create_appointmentform.labelMinDaysBeforeAppointments.help'  maxlength=2 />
			
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelUserCanCancelAppointments' inputName='allow_users_to_cancel_appointments' value='true' checked=appointmentform.allowUsersToCancelAppointments!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelDisplayTitleFo' inputName='display_title_fo' value='true' checked=appointmentform.displayTitleFo!false i18nHelpBlockKey='appointment.create_appointmentform.labelDisplayTitleFo.help' />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelNbWeeksToDisplay' inputName='nb_weeks_to_display' mandatory=true value=appointmentform.nbWeeksToDisplay!'' i18nHelpBlockKey='appointment.create_appointmentform.labelNbWeeksToDisplay.help'   maxlength=3 />
				
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelReference' inputName='reference' mandatory=true value=appointmentform.reference!'' maxlength=10 i18nHelpBlockKey='appointment.create_appointmentform.labelReference.help' />				
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelNbMaxByEmail' inputName='max_appointment_mail' mandatory=true value=appointmentform.maxAppointments!'0'  maxlength=2 i18nHelpBlockKey='appointment.create_appointmentform.labelMaxAppointments.help' />
				<@fieldInputText i18nLabelKey='appointment.create_appointmentform.labelNbMaxWeek'    inputName='nb_weeks_limits'  mandatory=true  value=appointmentform.weeksLimits!'0'     maxlength=2 i18nHelpBlockKey='appointment.create_appointmentform.labelWeeksLimits.help' />

			
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelIsFormStep' inputName='is_form_step' value='true' checked=appointmentform.isFormStep!false />
				
				<@fieldInputCombo i18nLabelKey='appointment.create_appointmentform.labelCalendarTemplate' inputName='calendarTemplateId' items=refListCalendarTemplates value="${appointmentform.calendarTemplateId!}" mandatory=true />
				<#if isCaptchaEnabled>
					<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableCaptcha' inputName='enableCaptcha' value='true' checked=appointmentform.enableCaptcha!false />
				</#if>
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableConfirmEmail' inputName='enableConfirmEmail' value='true' checked=appointmentform.enableConfirmEmail!false />
				<@fieldInputCheckBox i18nLabelKey='appointment.create_appointmentform.labelEnableMandatoryEmail' inputName='enableMandatoryEmail' value='true' checked=appointmentform.enableMandatoryEmail!false />
	            
				<div class="form-group">
					<label class="col-xs-12 col-sm-3 col-md-3" for="icon">#i18n{appointment.create_appointmentform.labelIconForm} &nbsp;:</label>
					<div class="col-xs-12 col-sm-6 col-md-6">
						<div class="input-group">	
							<input id="image_resource" type="file" name="image_resource" accept="image/*"/> 
						</div>
						<p class="help-block">#i18n{appointment.modify_appointmentForm.helpFormatIcon}</p>
					</div>
					<div class="col-xs-12 col-sm-3 col-md-3">
						<div class="input-group">
							<i class="glyphicon glyphicon-remove-circle">&nbsp;</i> 
							<input type="button"  value="Effacer" class="btn btn-default btn-sm" onclick ="$('#image_resource').val('')" /> 
						</div>
					</div>
				</div>
	            <div class="form-group">
					<div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
						<button name="action_modifyAppointmentForm" class="btn btn-primary btn-sm" type="submit" tabindex="18" >
							<i class="glyphicon glyphicon-ok">&nbsp;</i>&nbsp;#i18n{portal.util.labelModify}
						</button>
						<button name="view_manageAppointmentForms" class="btn btn-default btn-sm" type="submit" >
							<i class="glyphicon glyphicon-remove-circle">&nbsp;</i>&nbsp;#i18n{portal.util.labelCancel}
						</button>	
					</div>
	            </div>
	        
	    </form>
	    </fieldset>
	    </div>
    </div>



    <script src="js/jquery/plugins/ui/​jquery-ui-1.9.2.custom.min.js"></script>
	<@getDatePickerBootstrap idField="date_start_validity" language=language />
	<@getDatePickerBootstrap idField="date_end_validity"   language=language />
	<script type="text/javascript">
$('#date_start_validity').datepicker({
    language:		"${language}",
    weekStart: 1,
    todayBtn: true,
    todayHighLight: true,
    autoclose: true
});
$('#date_end_validity').datepicker({
    language:		"${language}",
    weekStart: 1,
    todayBtn: true,
    todayHighLight: true,
    autoclose: true
});
$('#dateMin').datepicker({
    language:		"${language}",
    weekStart: 1,
    todayBtn: true,
    todayHighLight: true,
    autoclose: true
});
</script>
</#macro> 
