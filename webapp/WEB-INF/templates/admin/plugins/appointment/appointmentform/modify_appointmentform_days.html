<#include "/admin/plugins/appointment/appointmentform/modify_appointmentform_tabs.html" />
<div class="row-fluid" >
	<@modifyAppointmentFormLeftColumn appointmentform=appointmentform listWorkflows=listWorkflows />
    <div class="span8">
    	<@tabs tab="days" appointmentform=appointmentform />
    	<@messages infos=infos />
    	<fieldset>
    		<legend>
    			#i18n{appointment.modify_appointmentformDays.pageTitle}
    			<#if nb_week &gt; -1>
	    			<div class="pull-right">
	    				<a class="btn btn-primary btn-small" href="jsp/admin/plugins/appointment/ManageAppointmentFormDays.jsp?view=confirmRefreshDays&id_form=${appointmentform.idForm}" title="#i18n{appointment.modify_appointmentformDays.labelRefreshDays}">
	    					<i class="icon-refresh icon-white">&nbsp;</i>&nbsp;#i18n{appointment.modify_appointmentformDays.labelRefreshDays}
	    				</a>
	    			</div>
    			</#if>
    		</legend>
			<div class="pull-left">
				<a class="btn btn-primary btn-small" href="jsp/admin/plugins/appointment/ManageAppointmentFormDays.jsp?view=modifyAppointmentFormDays&id_form=${appointmentform.idForm}&nb_week=${nb_week - 1}" title="#i18n{appointment.appointmentApp.previousWeek}">
					<i class="icon-arrow-left icon-white">&nbsp;</i>&nbsp;#i18n{appointment.appointmentApp.previousWeek}
				</a>
			</div>
			<div class="pull-right">
				<a class="btn btn-primary btn-small" href="jsp/admin/plugins/appointment/ManageAppointmentFormDays.jsp?view=modifyAppointmentFormDays&id_form=${appointmentform.idForm}&nb_week=${nb_week + 1}" title="#i18n{appointment.appointmentApp.nextWeek}">
					#i18n{appointment.appointmentApp.nextWeek}&nbsp;<i class="icon-arrow-right icon-white">&nbsp;</i>
				</a>
			</div>
			<#if listDays?? && listDays?size &gt; 0>
				<table class="table table-striped">
					<thead>
						<tr>
							<th>
								#i18n{appointment.modify_appointmentformDays.labelDate}
							</th>
							<th>
								#i18n{appointment.modify_appointmentformDays.labelOpen}
							</th>
							<th>
								#i18n{appointment.createEntry.manageField.rowActions}
							</th>
						</tr>
					</thead>
					<tbody>
						<#list listDays as day>
							<tr>
								<td>
									${day.date}
								</td>
								<td>
									<#if day.isOpen>
										<span class="label label-success">
											<i class="icon-ok-sign icon-white">&nbsp;</i>
										</span>
									<#else>
										<span class="label label-important">
											<i class="icon-remove-circle icon-white">&nbsp;</i>
										</span>
									</#if>
								</td>
								<td>
									<a href="jsp/admin/plugins/appointment/ManageAppointmentFormDays.jsp?view=getModifyDay&id_day=${day.idDay}" class="btn btn-primary btn-small" title="#i18n{portal.util.labelModify}">
										<i class="icon-edit icon-white">&nbsp;</i>
									</a>
									<#if day.isOpen>
										<a href="jsp/admin/plugins/appointment/ManageCalendarSlots.jsp?view=manageAppointmentSlots&id_day=${day.idDay}" class="btn btn-primary btn-small" title="#i18n{appointment.modify_appointmentformDays.labelManageSlots}">
											<i class="fa fa-calendar"></i>
										</a>
									</#if>
								</td>
							</tr>
						</#list>
					</tbody>
				</table>
			<#else>
				<div class="row-fluid" >
					<div class="span12">
						<br />
						#i18n{appointment.modify_appointmentformDays.labelNoResultWeek} <b>${dateMin}</b> #i18n{appointment.modify_appointmentformDays.labelNoResultWeekTo} <b>${dateMax}</b>.
					</div>
				</div>
			</#if>
    	</fieldset>
    </div>
</div>

<#macro comboOrders name default_value idParent >
		<select id="${name}" name="${name}" class="input-mini">
			<#if idParent &gt; 0 && lastGroup??>
				<#assign start_enum = lastGroup.position + 1 >
				<#assign nb_entries = lastGroup.position + lastGroup.children?size >
				<#list start_enum..nb_entries as i>
					<#if default_value == i>
						<option selected="selected" value="${i}">${i}</option>
					<#else>
						<option value="${i}">${i}</option>
					</#if>
				</#list>
			<#else>
				<#list listOrderFirstLevel as i>
					<#if default_value == i>
						<option selected="selected" value="${i}">${i}</option>
					<#else>
						<option value="${i}">${i}</option>
					</#if>
				</#list>
			</#if>
		</select>
</#macro>
<script src="js/jquery/plugins/ui/jquery-ui-1.9.2.custom.min.js"></script>
<script src="js/jquery/plugins/ui/ui.datepicker-fr.js"></script>
<@getDatePicker idField="date_start_validity" language='fr' />
<@getDatePicker idField="date_end_validity" language='fr' />
